[
  {
    "path": "posts/2021-07-03-assignmentmc1/",
    "title": "Assignment_MC1",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Xiaozhu Mao",
        "url": {}
      }
    ],
    "date": "2021-07-03",
    "categories": [],
    "contents": "\nLoading in packages\nThe packages will be used in the assignment.\n\n\npackages = c('stringr', 'tidyr','plyr','tidyverse', 'tm', 'lubridate', \n             'corporaexplorer', 'quanteda','quanteda.textstats', \"visNetwork\", \"networkD3\")\nfor (p in packages){\n  if(!require(p, character.only = T)){\n  install.packages(p)\n  }\nlibrary(p,character.only = T)\n}\n\n\n\nLoading in data\nget the list of articles in all paper sources\n\n\nlist_of_paper <- list.files(path = \"MC1/News Articles\", recursive = TRUE,\n                            pattern = \".\", \n                            full.names = TRUE)\n\n\n\niteratively load in each article and save into a list of dataframes\n\n\ndf_list <- list()\nnum <- 1\nfor (i in list_of_paper){\n  temp <- lapply(i, readLines)\n\n  temp <- lapply(1:length(temp),\n                   function(j) data.frame(\n                          news_no=str_extract(i, \"(?<=\\\\/)\\\\d+\"),\n                          rawdata=temp[[j]],\n                          stringsAsFactors = FALSE))\n                   \n  df_temp <- do.call(rbind, temp)\n  df_temp[,c(\"type\",\"entry\")] <- str_trim(str_split_fixed(df_temp$rawdata,\":\",2))\n  \n  df_temp <- df_temp[,c(\"news_no\",\"type\",\"entry\")]\n  df_temp <- pivot_wider(df_temp, names_from = type, values_from = entry)\n\n  df_list[[num]] <- df_temp\n  num <- num+1\n}\n\n\n\nbind all dataframes in the list\n\n\ndf <- do.call(rbind.fill,df_list)\n\n\n\nData cleaning and pre-processing\ncheck data types\n\n\nglimpse(df)\n\n\nRows: 845\nColumns: 8\n$ news_no   <chr> \"121\", \"135\", \"152\", \"154\", \"237\", \"251\", \"341\", …\n$ SOURCE    <chr> \"All News Today\", \"All News Today\", \"All News Tod…\n$ TITLE     <chr> \"POK PROTESTS END IN ARRESTS\", \"RALLY SCHEDULED I…\n$ PUBLISHED <chr> \"2005/04/06\", \"2012/04/09\", \"1993/02/02\", \"1998/0…\n$ LOCATION  <chr> \"ELODIS, Kronos\", \"ABILA, Kronos\", \"ABILA, Kronos…\n$ TEXT      <chr> \"Fifteen members of the Protectors of Kronos (POK…\n$ AUTHOR    <chr> NA, NA, NA, \"Petrus Gerhard\", NA, NA, NA, NA, NA,…\n$ NOTE      <chr> NA, NA, NA, \"This article is the first in a serie…\n\nconvert “published” to datetime, it is currently a character and format all to unify the format\n\n\nformats <- c(\"%d %B %Y\",\"%d%B %Y\",\"%B %d, %Y\",\"%Y/%m%d\")\ndf <-df %>%\n  mutate(date = parse_date_time(PUBLISHED, formats))\n\n\n\nconvert Doc_id to int\n\n\ndf$news_no <- as.integer(df$news_no)\n\n\n\nconvert date to date format\n\n\ndf$date <- as.Date(as.POSIXct(df$date,tz=\"GMT\"))\n\n\n\nchange column name and adjust column order in order to load to corpus\n\n\ncolnames(df) <- c(\"Doc_id\",\"Source\",\"Title\",\"Published\",\"Location\",\"Text\",\"Author\",\"Note\",\"date\")\ndf_corpus <- df[,c(\"Doc_id\",\"Text\",\"Source\",\"Title\",\"Author\",\"date\",\"Location\",\"Note\")]\n\n\n\nuse quanteda to load corpus and clean the corpus by removing stopwords and punctuations. Calculate cosine similarity between each pair of document and convert to a dataframe.\n\n\nnews_corpus <- corpus(df_corpus, docid_field=\"Doc_id\", text_field=\"Text\")\nclean_corpus <- dfm(news_corpus, remove=stopwords(\"english\"), remove_punct=TRUE)\nsim <- textstat_simil(clean_corpus, margin=\"document\", method=\"cosine\")\nsim_df <- as.data.frame(sim)\n\n\n\nchange document1 and document2 to integer\n\n\nsim_df$document1 <- as.integer(as.character(sim_df$document1))\nsim_df$document2 <- as.integer(as.character(sim_df$document2))\n\n\n\ncreate a table of source for merging later\n\n\ndf_source <- df_corpus %>%\n  select(Doc_id,Source,date) \n\n\n\nswap doc1 and doc2 id to make doc1 date always earlier than doc2 date. add rowid as pair_id, split to 200 bins as ranking based on cosine, highest cosine value indicates highest rank, and highest similarity\n\n\nsim_tmp <- sim_df %>%\n  rowid_to_column(var=\"pair_id\") %>%\n  mutate(rank=ntile(cosine,200)) %>%\n  filter(rank==200) %>%\n  left_join(df_source, by=c(\"document1\"=\"Doc_id\"), suffix=c(\"1\",\"2\")) %>%\n  left_join(df_source, by=c(\"document2\"=\"Doc_id\"), suffix=c(\"1\",\"2\")) %>%\n  filter(Source1 != Source2) %>%\n  filter(date1 != date2) %>%\n  transform(document1=ifelse(date1<=date2, document1, document2),\n            document2=ifelse(date1<=date2, document2, document1)) %>%\n  transform(Source1=ifelse(date1<=date2, Source1, Source2),\n            Source2=ifelse(date1<=date2, Source2, Source1))\n\n\n\nsince doc 1 is published earlier than doc2, here we assume doc1 is primary news and the matching doc2 is the secondary news. Count the number of primary and secondary news in each news source and label them as primary or secondary.\n\n\ndf_primary <- sim_tmp %>%\n  filter(rank==200) %>%\n  left_join(df_source, by=c(\"document1\"=\"Doc_id\"), suffix=c(\"1\",\"2\")) %>%\n  left_join(df_source, by=c(\"document2\"=\"Doc_id\"), suffix=c(\"1\",\"2\")) %>%\n  group_by(Source1) %>%\n  count(document1) %>%\n  mutate(role=\"primary\") \n\ndf_secondary <- sim_tmp %>%\n  filter(rank==200) %>%\n  left_join(df_source, by=c(\"document1\"=\"Doc_id\"), suffix=c(\"1\",\"2\")) %>%\n  left_join(df_source, by=c(\"document2\"=\"Doc_id\"), suffix=c(\"1\",\"2\")) %>%\n  group_by(Source2) %>%\n  count(document2) %>%\n  mutate(role=\"secondary\") \n\ndf_join <- df_corpus %>%\n  left_join(df_primary, by=c(\"Doc_id\"=\"document1\"), suffix=c(\"_pri\",\"_sec\")) %>%\n  left_join(df_secondary, by=c(\"Doc_id\"=\"document2\"), suffix=c(\"_pri\",\"_sec\")) %>%\n  select(-Source1,-Source2) %>%\n  unite(\"role\", n_pri, role_pri, n_sec, role_sec, sep=\"_\",na.rm=TRUE)\n\nglimpse(df_join)\n\n\nRows: 845\nColumns: 9\n$ Doc_id   <int> 121, 135, 152, 154, 237, 251, 341, 391, 420, 554, …\n$ Text     <chr> \"Fifteen members of the Protectors of Kronos (POK)…\n$ Source   <chr> \"All News Today\", \"All News Today\", \"All News Toda…\n$ Title    <chr> \"POK PROTESTS END IN ARRESTS\", \"RALLY SCHEDULED IN…\n$ Author   <chr> NA, NA, NA, \"Petrus Gerhard\", NA, NA, NA, NA, NA, …\n$ date     <date> 2005-04-06, 2012-04-09, 1993-02-02, 1998-03-20, 1…\n$ Location <chr> \"ELODIS, Kronos\", \"ABILA, Kronos\", \"ABILA, Kronos\"…\n$ Note     <chr> NA, NA, NA, \"This article is the first in a series…\n$ role     <chr> \"1_primary_1_secondary\", \"4_primary\", \"3_primary\",…\n\nget all the documents that are similar, similar_later are the documents with later published date, similar_earlier are the documents with earlier published date. This information will be used to enable easy search and compare of document.\n\n\npair_pri <- sim_tmp %>%\n  select(cosine,pair_id,document1,document2) %>%\n  group_by(document1) %>%\n  arrange(document1,desc(cosine)) %>%\n  summarize(similar_later=paste(document2, collapse=\"_\"))\n\npair_sec <- sim_tmp %>%\n  select(cosine,pair_id,document1,document2) %>%\n  group_by(document2) %>%\n  arrange(document2,desc(cosine)) %>%\n  summarize(similar_earlier=paste(document1, collapse=\"_\"))\n\ndf_join <- df_join %>%\n  left_join(pair_pri, by=c(\"Doc_id\"=\"document1\")) %>%\n  left_join(pair_sec, by=c(\"Doc_id\"=\"document2\"))\n\nglimpse(df_join)\n\n\nRows: 845\nColumns: 11\n$ Doc_id          <int> 121, 135, 152, 154, 237, 251, 341, 391, 420…\n$ Text            <chr> \"Fifteen members of the Protectors of Krono…\n$ Source          <chr> \"All News Today\", \"All News Today\", \"All Ne…\n$ Title           <chr> \"POK PROTESTS END IN ARRESTS\", \"RALLY SCHED…\n$ Author          <chr> NA, NA, NA, \"Petrus Gerhard\", NA, NA, NA, N…\n$ date            <date> 2005-04-06, 2012-04-09, 1993-02-02, 1998-0…\n$ Location        <chr> \"ELODIS, Kronos\", \"ABILA, Kronos\", \"ABILA, …\n$ Note            <chr> NA, NA, NA, \"This article is the first in a…\n$ role            <chr> \"1_primary_1_secondary\", \"4_primary\", \"3_pr…\n$ similar_later   <chr> \"760\", \"414_239_207_773\", \"639_210_748\", \"3…\n$ similar_earlier <chr> \"221\", NA, NA, \"69\", NA, \"688_297\", \"290\", …\n\nuse corporaexplore to visualiza all primary and secondary sources.\n\n\ndashboard <- prepare_data(\n  dataset = df_join,\n  date_based_corpus = FALSE,\n  columns_doc_info=c(\"Doc_id\",\"Title\",\"Author\", \"date\", \"Location\",\n                     \"role\",\"similar_later\", \"similar_earlier\"),\n  grouping_variable = \"Source\")\n\nsaveRDS(dashboard, \"./dashboard/corpus_dashboard.rds\", compress = FALSE)\n\n\n\n\n\n\nclick here to view the shiny app\n\n\nNext, create nodes list and edges list for visualizing dependancies network between sources\n\n\nsim_nodes <- df_source %>%\n  distinct(Source) %>%\n  rename(label=Source) %>%\n  rowid_to_column(\"id\")\n\nsim_edges <- sim_tmp %>%\n  group_by(Source1, Source2) %>%\n  summarise(weight=n()) %>%\n  left_join(sim_nodes, by=c(\"Source1\"=\"label\")) %>%\n  rename(from=id) %>%\n  left_join(sim_nodes, by=c(\"Source2\"=\"label\")) %>%\n  rename(to=id) %>%\n  ungroup() %>%\n  select(from, to, weight)\n\n\n\nvisualize dependencies between sources in a network graph\n\n\nsim_table <- sim_tmp %>%\n  group_by(Source1, Source2) %>%\n  summarise(similar_doc_count=n()) %>%\n  left_join(sim_nodes, by=c(\"Source1\"=\"label\")) %>%\n  left_join(sim_nodes, by=c(\"Source2\"=\"label\")) %>%\n  select(Source1, Source2, similar_doc_count) %>%\n  filter(similar_doc_count>=10) %>%\n  arrange(desc(similar_doc_count))\n  \nview(sim_table)\n\n\n\n\n\nvisNetwork(sim_nodes, sim_edges) %>%\n  visEdges(arrows = 'middle') %>%\n  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) %>%\n  visIgraphLayout(layout=\"layout_in_circle\")\n\n\n\n{\"x\":{\"nodes\":{\"id\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],\"label\":[\"All News Today\",\"Athena Speaks\",\"Central Bulletin\",\"Centrum Sentinel\",\"Daily Pegasus\",\"Everyday News\",\"Homeland Illumination\",\"International News\",\"International Times\",\"Kronos Star\",\"Modern Rubicon\",\"News Desk\",\"News Online Today\",\"Tethys News\",\"The Abila Post\",\"The Continent\",\"The Explainer\",\"The General Post\",\"The Guide\",\"The Light of Truth\",\"The Orb\",\"The Truth\",\"The Tulip\",\"The World\",\"The Wrap\",\"Who What News\",\"World Journal\",\"World Source\",\"Worldwise\"],\"x\":[1,0.976551828617438,0.907303724902832,0.795493653222135,0.646349728259169,0.466845754183635,0.265375137318966,0.0513584197912478,-0.165197214550422,-0.374165864928528,-0.565776389503363,-0.73106929310561,-0.862315663272695,-0.95337856560547,-1,-1,-0.95337856560547,-0.862315663272695,-0.73106929310561,-0.565776389503363,-0.374165864928528,-0.165197214550422,0.0513584197912478,0.265375137318967,0.466845754183635,0.646349728259169,0.795493653222135,0.907303724902832,0.976551828617438],\"y\":[0,0.215286175934694,0.420505809556081,0.606063058881266,0.763281473163873,0.884809694087763,0.964965197111454,1,0.988275914308719,0.930341145254151,0.828904658247415,0.68870951068239,0.516311071843499,0.319770501123747,0.108277817170835,-0.108277817170835,-0.319770501123747,-0.516311071843499,-0.68870951068239,-0.828904658247415,-0.930341145254151,-0.988275914308719,-1,-0.964965197111454,-0.884809694087763,-0.763281473163872,-0.606063058881266,-0.420505809556082,-0.215286175934695]},\"edges\":{\"from\":[1,1,1,1,2,2,3,3,3,3,5,5,5,6,6,6,7,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,15,15,15,15,15,15,16,16,17,17,17,18,18,18,18,18,19,19,19,19,20,20,20,20,20,20,21,21,21,22,22,22,22,23,23,23,24,24,24,24,24,24,24,24,24,25,25,25,26,26,26,26,26,26,26,26,26,27,27,27,28,28,28,28,29,29,29,29],\"to\":[5,13,21,25,12,17,2,12,13,17,7,21,25,16,27,28,1,5,13,21,25,3,10,13,15,17,19,22,29,6,13,16,27,28,2,3,8,12,13,15,17,19,22,29,2,15,17,22,1,2,3,5,6,7,8,10,12,15,16,17,18,19,20,21,22,23,25,26,27,29,2,3,12,13,17,29,6,27,2,12,15,2,15,17,20,23,2,17,22,29,2,12,15,17,18,23,5,7,25,12,13,19,29,12,18,20,2,12,13,15,17,18,20,23,26,5,7,21,2,3,12,13,15,17,18,20,23,6,16,28,6,13,16,27,2,13,19,22],\"weight\":[14,4,14,11,4,3,11,10,1,10,1,8,6,1,2,1,13,28,21,28,27,2,1,6,1,1,10,10,11,10,10,12,11,2,1,2,11,2,22,3,1,22,23,23,6,1,4,1,1,8,7,6,4,1,1,1,6,2,2,7,6,9,6,7,6,3,5,3,2,3,18,14,18,13,18,1,3,3,6,5,1,1,1,1,1,2,1,1,3,5,1,1,1,1,5,4,9,1,7,3,1,6,5,1,5,4,1,1,10,1,1,15,15,14,9,8,1,8,1,1,1,1,1,1,10,8,6,3,2,1,5,4,6,6,4,1,8,6]},\"nodesToDataframe\":true,\"edgesToDataframe\":true,\"options\":{\"width\":\"100%\",\"height\":\"100%\",\"nodes\":{\"shape\":\"dot\",\"physics\":false},\"manipulation\":{\"enabled\":false},\"edges\":{\"arrows\":\"middle\",\"smooth\":false},\"physics\":{\"stabilization\":false}},\"groups\":null,\"width\":null,\"height\":null,\"idselection\":{\"enabled\":true,\"style\":\"width: 150px; height: 26px\",\"useLabels\":true,\"main\":\"Select by id\"},\"byselection\":{\"enabled\":false,\"style\":\"width: 150px; height: 26px\",\"multiple\":false,\"hideColor\":\"rgba(200,200,200,0.5)\",\"highlight\":false},\"main\":null,\"submain\":null,\"footer\":null,\"background\":\"rgba(0, 0, 0, 0)\",\"highlight\":{\"enabled\":true,\"hoverNearest\":false,\"degree\":1,\"algorithm\":\"all\",\"hideColor\":\"rgba(200,200,200,0.5)\",\"labelOnly\":true},\"collapse\":{\"enabled\":false,\"fit\":false,\"resetHighlight\":true,\"clusterOptions\":null,\"keepCoord\":true,\"labelSuffix\":\"(cluster)\"},\"igraphlayout\":{\"type\":\"square\"}},\"evals\":[],\"jsHooks\":[]}\nstopped here\n\n\n\n",
    "preview": {},
    "last_modified": "2021-07-09T16:09:41+08:00",
    "input_file": "assignmentmc1.knit.md"
  },
  {
    "path": "posts/2021-06-18-dataviz-makeover-2/",
    "title": "Dataviz Makeover 2",
    "description": "Redesigning data visualization assignment for ISSS608-Visual Analytics - interactive",
    "author": [
      {
        "name": "Xiaozhu Mao",
        "url": {}
      }
    ],
    "date": "2021-06-18",
    "categories": [],
    "contents": "\n\nContents\nInteractively visualize export and import in top countries(regions)1. Original visualization and criticsORIGINAL GRAPH\nCRITIC - AESTHETICS\n\n2. Proposed visualizationAdvantages using proposed plot\nFinal interactive visualization\n\n3. Preparing the visualization with Tableau1) Preparation and import\n2) Calculating new fields and parameters\n3) Plotting the graph\n\n4. Observation\n\n\nInteractively visualize export and import in top countries(regions)\nIn this assignment, data is taken from Department of Statistics to analyze merchandise trade with Singapore by region. Analysis is performed for data obtained from 2011 Jan to 2020 Dec. The goal of the assignment is to interactively visualize the top few countries (number can be defined) in total trading value and the percentile of export and import in each country/region.\n1. Original visualization and critics\nORIGINAL GRAPH\n\n### CRITIC - CLARITY\n* There is no title or any explanation of when the data was taken. It provides the viewer little context of what the visualization is about. There is also no explanation of what these values represent. They should be stated in the title of the whole graph. * There is no explanation on why the countries were chosen. Even though there is a note at the bottom explaining hte net importer and net exporter, no explanation has been made about why these countries/regions are chosen.\n* Axis is not clearly labelled. With background knowledge, I infer that the axis represents percentage. However as it is written in integers from 0 to 80, it is ambiguise if it is referring to dollar value or percentage.In additino, there is no label to the axis.\n* The additional information in the bottom, i.e. “since 2009…..with the United States since 2006” cannot be visualized in the graph. As the visualization is static, there is no time change incorporated and hence viewers are unable to see trend with time change. In addition, there is no indication of the time in the graph.\n* Source is not clearly stated. Viewers are unable to understand the context of this visualization. It should have been clearly stated where the data is from.\nCRITIC - AESTHETICS\nThe circles are overlapping and overlay on each other, some are completely blocked. It is hard to see all countries/regions. For example, bubble of Korea, Japan and Indonesia are completely overlapping.\nToo many colours. It is unnecessary and distracts viewer’s attention. The colors are not chosen purposely. By different colors, viewers cannot tell what the color means except that they refer to different countries/regions. Too many colors have made the graph messy and not visually appeasing.\nThe icons are too big and not necessary.The icons of “Top net exporter” and “Top net importer” takes up relatively large space, especially if it is compared with the bubble of countries with smaller trade values, such as Thailand and Japan.\nThe floating annotation of Mainland China exceeds the graph boundary. The color of it is also too bright and hard to read.\nMany floating annotation blocks the bubble plot, For example, “United States” annotation is on top of bubble of Taiwan and EU.\n2. Proposed visualization\nSketch of proposed visualizationAdvantages using proposed plot\nThe visualization has a title to give a context of when the data is taken from and what the graph is about.\nSource and explanation of the key annotation, such as “net importer”, “net exporter”, “top net importer”, and “top net exporter” is provided.\nOnly 2 colors, blue and red are used to denote export and import. It is easier to interpret.\nThe axixes are labeled and color coded to reflect import and export.\nIt is now an interactive visualization. Viewer can select the year from 2011 to 2020 to see the top N countries/regions by total trade value. Alternatively, user can play to see the trend of change with time.\nFinal interactive visualization\nThe visualization can be found here in Tableau Public.\n3. Preparing the visualization with Tableau\n1) Preparation and import\nFirst import the original data file to Tableau. Drag the table Export to the data panel.As the analysis focuses on trend from 2011 Jan to 2020 Dec, here we are hiding away the data from other time period. Select all data from the first column of date to 2010 Dec->right click->Hide. Do the same for data after 2020 Dec.\nSelect all data from 2011 Jan to 2020 Dec->right click->Pivot. This is to reconstruct the table for plotting.\nGo to the first column “variables” which is the country name, right click->split, to obtain the country short name and the dollars in thousands or millions.\nOnce we have all the columns needed, rename them as shown in the picture to reflect their meanings.\nPivoted variables have wrong data types. Change exportDate type to “Date”. \nSimilarly, change exportVal type to “Number(decimal)”\nDrag the “Import” table to connect with “Export” table. Repeat step 1 to 5 for “Import table” and rename the variables as the following. \nClick on Edit filter and add 2 filters to exclude the following in both countryNameEx and countryameIm: Africa, America, Asia, Europe, Ocenia, and total Merchandise Import. This is because these are continent that contains summarized merchandise trading of the countries in the continent. They are not independent trading market to be compared with other countries. 6 values are excluded from each filter.\nEdit the relation between “Export” and “Import” table by the following 2 fields: time and country name. Country name used here is the 1st split from original variable. Hence it does not contain “(thousands dollars)” in the name. It is achieved by clicking “Create Relationship Calculation”->type in the formula.\nThe 2 relationship are as below. Up to this step, we have prepared the data for use in the next stage.\n2) Calculating new fields and parameters\nAs some merchandise values are in thousands and some are in millions, these 2 new fileds are calculated to unify all values in export and import.\nCalculate total merchandise value to use for ranking later.\nCalculate the percentage of export and import over the overall trading value with singapore.\nBased on the percentage, calculate if the “exporter” or “importer”. If the export contributes to 50% of the total trade value with Singapore, the country/region is defined as “Exporter”. In contrary, if less than 50% of the total trade is from export, the country will be called “Importer”.\nCalculate the rank in export and import for each country. This will be used in tooltip for more information.\nBased on ranking in import and export, create a field of top net exporter or top net importer. The number 1 ranked in each will be the top.\nTo select top N countries/regions in the total trade values, we first create a parameter from the table. Set the initial value (current) to 5, minimum to 0, maximum to 30 and step size to 5.\nAs there are more countries in Import table than export table, here we are creating a set from Import country names. Note that it is the same in both tables if the country exists in both. This set will be used together with parameter created in step 7 to filter out top N countries.\n3) Plotting the graph\nSheet 1: bubble plot - visualize percentile in all countries at 1 glance\nDrag export and import from data pane to column and row individually.\nClick on both “export” and “import”, go to quick table calculation and change the calculation to “Percentile”. Next, change the computing to “by country”.\nNext, drag “exportPerc” to Color, so color varies with different import and export percentage.Drag “totalVal” to size to have sizes of circle varies with it. Drag “Country” to details so tableu understands the summation and calculation is based on country. Drag “topNetExporter”, “topNetImporter” and “CountryNameIm” to Label. Lastly, drag “import”, “export”, “exportRank”, “importRank”, “majorityExport”, “majorityImport”, “CountryNameIm” to tooltip. They will be used to form a description in each tooltip.\nClick on “Color”->Edit color. Change palette to “Red-Blue Diverging and set center as 0.5.\nClick on”Size“->Edit size. Change size vary to”by range\" and adjust the size. Blue is used to represent export and red is to represent import.\nClick on “Label”->Text. Insert “topNetExporter”,“topNetImporter” and “CountryNameIm”. Colors are set to blue or red individually to reflect exporter or importer. Tick the box to allow marks over lap with other mark, so when there are more countries to view, all marks can be displayed.\nIn label and tooltip, change the computation to by “country” for “topNetExporter”, “topNetImporter”,“exportRank”, and “importRank”.\nRight click on “SUM(totalValue)”->format. Under “Pane” section, in dropdown of numbers, select currency custom and choose 1 as decimal space, Billions as display uit. Do the same for other continuous variables, “import” and “export” to be properly displayed in tooltip.\nDrag “exportDate” to Pages and right click, from the drop down, select discrete “Year”. Then select “show filter”.\nDrag “Top N total” to filter. Under parameter, right click on the parameter “totalRank parameter” and select show paramter.\n\n6. Click on “Tooltip” and inserts values as shown below. Change the color for “majorityExport” and “majorityImport” accordingly so it is colored by export:blue and import:red. Bold all inserted values.\n7. Change the title and sheet name by inserting the page name and parameter.SHeet name is changed to “bubble plot”.\n8. Final view of sheet 1 with graph settings.\nSheet 2: line graph - monthly trend of export percentage in each country each year\nDrag “exportDate” and “exportPerc” to column and row. Change date to continuous month.\nDrag “exportPerc” to Color. Click on Color->Edit color and select Red-Blue diverging palette. Set the center to 0.5.\nRight click on the Y axis and select “Add reference line”. In the reference line setting, set a constant value of 0.5 and label it as 50%. Under formatting, change it to red dotted line with above filled in blue and bottom filled in red. Blue to indicate export and red to indicate import.\nLabel the top area as “Exporter” and Bottom area as “Importer” by adding annotation in area. Right click->Format, change the background to None.\nThe final view of sheet 2, renamed as Line, is shown below.\nNext, we will add it to the tool tip. Click tooltip->insert->select line. Change the maxwidth to 300, and maxheight to 200 to fit nicely.\nBelow shows an example of how tooltip looks like.\nSheet 3: histograph - comparing percentage of import and export among countries\nDrag “exportPerc”, “importPerc”, and “CountryNameIm” to columns and rows accordingly.\nRight click on X axis of “exportPerc” and choose Edit Axis. Change scale to “reversed”.\nDrag “exportPerc” and “importPerc” to label accordingly.\nClick on label->Edit label. Change the color to blue for exportPerc and red for importPerc.\nChange color of the histograph. Export: blue; import: red\nClick on the sort button on top of the histograph in exportPerc pane. It will sort descending by export percentage.\nLastly, hide way both X axis and Y axis field label.\nThe whole view of sheet 3, renamed as histograph is shown below.\nInteractive dashboard\nDrag Bubble plot, Histograph to the dashboard. Adjust the position and title. Remove title from histograph as it can be inferred from the color and the overall title. Remove title from bubble plot as it will be replaced by dashboard title. Change the paramter title to “Top N by total trade value”. Change year filter title to “Year”. Change color legend title to “Export % over total trade value”.\nAdd in title by ticking the box of “show dashboard”. Add in another explanatory text box and source text box.\nAdjust the position and the final view of the dashboard is as below:\n4. Observation\nFrom 2011 to 2020, Hong Kong remained to be the top net exporter. The trading amount has increased overall in the past 10 years and the percentage of export remained at around 92%. This is probably due to the fact that Hong Kong is also a trading hub. There is hence a large amount of merchandise traded with Hong Kong.\nTaiwan remained to be the top net importer since 2013. From 2011 to 2011, United States is the top importer. From 2013 to 2020, United States remained to be the second in importer with Singapore. Semiconductor industry, and information technology are pillar industries of Taiwan. Integrated electronic chips is the top imported merchandise category in Singapore. Considering the distance to Taiwan and diplomatic relationship, this could possibly explain why Taiwan remained to be the top importer for the past 7 years.\nMalaysia became a net importer in 2019. Since 2011, the percentage of exports with Malaysia has gradually decreased, from 56.56% to 49.68% in 2019. In 2020, it has decreased to 44.37%. The drop may be explained by the influence of Covid-19. Since mid 2020, Malaysia and Singapore border was strictly controlled, which possibly contributes the declining export from Singapore to Malaysia.\nIn 2020, United States became net exporter with 52.77% in export. Until 2019, United states remained to be the top among importers. In 2011 and 2012, it was even top net importer.\nSouth Korea became a net exporter in 2017 with exports exceeding imports at 50.86%. The percentage of exports has since increased and reached 51.87% in 2020. Overall, it is still balanced between exports and imports. However, the total trade value with Singapore has been decreasing since 2011. In 2011, total trade value was $47.1 billion dollars. However, in 2020, it has decreased to 44.6 billion dollars.\nMainland China was ranked from 2nd to 4th in exports, imports and total trade value until 2013. In 2014, it has jumped to 1st in both imports, exports and total trade value. It remained to be the top since 2014 with a great lead before the country in second place. Even in the middle of Covid-19 in 2020, the total trade value was not reduced. With some research, it is found that in May 2013, Ministry Authority of Singapore opened representative office in Beijing, aiming to strengthen bilateral collaboration and deepen the financial and economic cooperation. This was considered a milestone on Singapore-China collaboration in economy. By end of 2013, according to the statistic research by China, Singapore has become the top exporter to China, with a export value of 66.5B dollars.\nWhat is observed in the visualization, Mainland China jumping to top 1 in imports, exports and total value in 2014, is possibly the consequence of what happened in 2013. China’s lead in trade values before other countries was further enhanced by former president Tony Tan’s visit to China and chairman Xi’s visit to Singapore, both in 2015.\nreference: (https://www.mas.gov.sg/news/media-releases/2013/mas-opens-representative-office-in-beijing), (https://sgchina30.businesschina.org.sg/a-look-back-on-exchanges.html)\n\n\n\n",
    "preview": {},
    "last_modified": "2021-06-19T15:34:02+08:00",
    "input_file": "dataviz-makeover-2.knit.md"
  },
  {
    "path": "posts/2021-05-29-dataviz-makeover-1/",
    "title": "DataViz Makeover 1",
    "description": "Redesigning data visualization assignment for ISSS608-Visual Analytics",
    "author": [
      {
        "name": "Xiaozhu Mao",
        "url": {}
      }
    ],
    "date": "2021-05-29",
    "categories": [],
    "contents": "\n\nContents\nVisualize export and import values in top 6 countreis1. Original visualization and critics\n2. Proposed visualization sketch\n3. New visualization using Tableau1) Preparation and import\n2) Plotting the graph\n3) Joining to a dashboard\n\n4. Observation\n\n\nVisualize export and import values in top 6 countreis\nIn this assignment, data is taken from Department of Statistics to analyze merchandise trade with Singapore by region. Analysis is performed on export and import values from 2019 to 2020 in top 6 countries, Mainland China, United States, Malaysia, Hong Kong, Japan and Taiwan.\n1. Original visualization and critics\nORIGINAL GRAPH\nAbove is the orignal visualisation plotCRITIC - CLARITY\nThere is no clear purpose of the graph. From comparison of import and export, there is hardly any insights drawn as the graphs all look similar\nThe duration is not consistent. While the rest are plotted agains months from 2019 to 2021, exports and imports in Japan is plotted agains 2020 only.\nThe export and import axis range is not consistent. For example, in Hong Kong and US, export amount is plotted from 0 to 6M. In Taiwan and Japan, the y-axis range is from 0 to 2M. There is no way to compare across countries.\nImport and Export are using different ranges and should not be compared or overlay.\nThe graph does not show the rank among these countries even though title says they are the top 6.\nThe axis tick marks are misleading by suggesting the values are in Million dollars. In fact, the values are in thousands. 6M in the axis means 6M thousands dollars\nSource of the data is not stated anywhere\nCRITIC - AETHETICS\nThe size of the subplots are not consistent. The plot of Mainland China and Malaysia are clearly larger than the one for Hong Kong and Japan. The axis are not aligned.\nX-axis name is not clear. It is denoted as month of period while the axis is showing year\nThe shading of graph is unnecessary as the line graph itself is enough to show trend. Shading overlaps with each other makes it hard to interpret.\nToo much empty space taken up by the axis. As a result, the graphs look very small.\n2. Proposed visualization sketch\nAdvantages using proposed plot\n1. 3 plots have their own purpose. (Top: to show a general trend in each country; Bottom Left: to compare export trading between countries; Bottom Right: to compare import trading between countries )\n2. The duration of plot is made consistent in all 3 graphs, from 2019 Jan to 2020 Dec.\n3. Dual Axis range are to be made consistent for easy comparison within each country.\n4. Title specifies the values are in thousands.\n5. It uses line graph to avoid shading overlaping.\n6. Graphs will be aligned amd adjusted to have minimal empty space.\n3. New visualization using Tableau\nThe visualization can be found here in Tableau Public.\n1) Preparation and import\nRemove unnecessary data: export and import value before 2019 and after 2021 is removed. When importing the data to Tableau, filter out data only from top 6. \nSelect all data and pivot. Do the same for both Import table and Export table. \nChange the column name and data format accordingly.\nExMonthYear, ImMonthYear: date ExVal, ImVal: numeric(whole) \nJoin Export table and Import table on conditions: 1. country name; 2.MonthYear \n2) Plotting the graph\nSheet 1\nIn sheet 1, we aim to visualize a general trend of import and export in 6 countries over time. It is used to compare import and export within each country and to observe any trend over time.\nDrag ExMonthYear from export table to column, sum of export values and sum of import values to rows. Set them as dual axis. Drag ExCountry(country name in export table) to rows column before summation values. Change ExMonthYear to continuous Month. \nClick on ImVal Axis and tick “Synchronize dual axes” so both axis have the same range.\nIn format of each axis, ExVal and ImVal, change the Font color to match the graph color. Blue - Export; Orange - Import.\nFrom the graph, there are a few sudden drop and sudden increase. To make them clearer in a static graph, they are annotated out.The final result after adjusting sizes and editing the title is as below: \nSheet 2\nIn sheet 2 and sheet 3, the goal is to compare export and import among 6 countries. Sheet 2 visualizes Export whereas sheet 3 visualizes Import.\nDrag ExMonthYear and ExCountry to columns, and Sum of ExVal to rows. \nChange the marks type to Bar and drag ExCountry, the country names, to color. \nSort the bar charts by ascending order so the highest appear on the right. \nFrom observation of the graph, US and Malaysia are to be taken special attention. Change their colors and leave the rest as the same. So US and Malaysia will standout. Change by right click the legends-Edit Colors \nChange the Axis color to blue to be consistent with Sheet 1.The final result after adjusting size and editing title is as below:\nSheet 3\nSheet 3 is the same as sheet 2 but values used are from Import table.\nDrag values to columns and rows. \nChange mark type to Bar and drag ImCountry, the country names, to assign colors.\nSort bar chart in ascending order by right click on the axis. \nFrom observation, Import in 2019 and 2020 differs significantly in US. To highlight this for attention, change the color and leave the rest as the same. The final result after adjusting size and editing title is as below: \n3) Joining to a dashboard\nIn this assignment, a dashboard is used to show all 3 plots.\nDrag all 3 sheets to the main dashboard area.\nAdd in another text block to state source of data.\nAfter adjusting size and alignment, the final view of the dashboard is as below: \n4. Observation\nIn general, in the 6 countries, import and export values do not change much over the two years. Especially in HK, Japan and Taiwan, the graph tends to be flat. However, there is significant drop of import and export in China in Feb 2020. This is potentially due to Covid-19 Which outbursted during the time. Many countries stopped trading and closed border for Chinese exports and imports. In Aug 2020, there was a significant surge in export in Aug 2020. By Aug, the pandemic was contained domestically in China and merchandise trade was back to normal. However it was the start of Covid-19 outburst in other parts of the world. This probably explains why the export increased but import was not.\nIn China, US, Malaysia, and Japan, the merchandise trading values in export and import with Singapore are about the same. However in Hong Kong, the amount in export is significantly higher than the amount of import. This could be explained by the fact that Hong Kong, unlike other countries in the list, does not have enough natrual resources and do not export products such as food, fruit, and poultry to Singapore. On the contrary, Singapore has been exporting high value of machines, refined petroleum and precious metals to Hong Kong, which contributed to the great value differences.\nIn export graph, ranking of US and Malaysi swapped from 2019 to 2020. There was a slight increase in export trading values with US in 2020 and a great decrease in that with Malaysia.\nIn import graph, there is a significant drop of import trading values with US in 2020. This could be due to the effect of Covid-19 outburst in the US, and also the repercussion of election.\n\n\n\n",
    "preview": {},
    "last_modified": "2021-05-30T20:30:56+08:00",
    "input_file": "dataviz-makeover-1.knit.md"
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to DataViz Blog",
    "description": "Hi!Welcome to my page :)",
    "author": [
      {
        "name": "Xiaozhu Mao",
        "url": {}
      }
    ],
    "date": "2021-05-22",
    "categories": [],
    "contents": "\n\n\n\n",
    "preview": {},
    "last_modified": "2021-05-30T20:30:02+08:00",
    "input_file": {}
  }
]
